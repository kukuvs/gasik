# Документация по использованию API проекта Gasprom\Git_Gas

## Общая информация
Данный проект реализует REST API для управления пользователями, проектами, событиями и навыками. Используются Django REST Framework и JWT для аутентификации.

---

## Аутентификация и получение токена
- **Логин и получение токена**
  - Метод: POST
  - URL: `/api/users/token/`
  - Параметры:
    - `email` — электронная почта пользователя
    - `password` — пароль
  - Ответ: JSON с `refresh` и `access` токенами

## Регистрация пользователя
- **Регистрация нового пользователя**
  - Метод: POST
  - URL: `/api/users/`
  - Параметры:
    - `email`, `name`, `phone`, `age`, `password1`, `password2`
  - Ответ: созданный пользователь

## Управление навыками
- **Добавление навыка по ID**
  - Метод: POST
  - URL: `/api/users/add_skill_by_id/`
  - Заголовки: Авторизация Bearer токен
  - Параметры:
    - `skill_id` — ID навыка
  - Ответ: сообщение о результате

- **Добавление навыка по названию**
  - Метод: POST
  - URL: `/api/users/add_skill_by_title/`
  - Заголовки: Авторизация Bearer токен
  - Параметры:
    - `title` — название навыка
  - Ответ: сообщение о результате

## Управление проектами
- **Создание проекта**
  - Метод: POST
  - URL: `/api/projects/`
  - Заголовки: Авторизация Bearer токен
  - Поля:
    - `title`, `description`, `date_proj`, `url`
  - Поле `main_user` устанавливается автоматически как текущий пользователь

- **Получение, обновление, удаление проектов**
  - URL: `/api/projects/` (list, create)
  - URL: `/api/projects/{id}/` (retrieve, update, delete)

## Управление событиями
- **Создание события**
  - Метод: POST
  - URL: `/api/events/`
  - Заголовки: Авторизация Bearer токен
  - Поля:
    - `title`, `description`, `start`, `end`
  - Только представители компаний (пользователи, у которых есть связанный объект `corporation`) могут создавать события

- **Получение, обновление, удаление событий**
  - URL: `/api/events/` (list, create)
  - URL: `/api/events/{id}/` (retrieve, update, delete)

## Регистрация на мероприятие
- **Запись пользователя на мероприятие**
  - Метод: POST
  - URL: `/api/event/register/`
  - Заголовки: Авторизация Bearer токен
  - Параметры:
    - `event` — ID события
  - Ответ: сообщение о результате

---

## Структура API
- **Маршруты**
  - `/api/users/` — управление пользователями (регистрация, получение токена, добавление навыков)
  - `/api/projects/` — управление проектами
  - `/api/events/` — управление событиями
  - `/api/event/register/` — регистрация на событие

- **Используемые сериализаторы**
  - `UserRegistrationSerializer` — регистрация пользователя
  - `ProjectSerializer` — сериализация проектов
  - `EventSerializer` — сериализация событий
  - `EventUserSerializer` — регистрация пользователя на событие
  - `AddSkillByTitleSerializer` — добавление навыка по названию

---

## Пример использования
1. Получить токен:
```
POST /api/users/token/
{
  "email": "user@example.com",
  "password": "password123"
}
```

2. Зарегистрировать пользователя:
```
POST /api/users/
{
  "email": "newuser@example.com",
  "name": "Новый Пользователь",
  "phone": "+79991234567",
  "age": 30,
  "password1": "password123",
  "password2": "password123"
}
```

3. Создать проект:
```
POST /api/projects/
Authorization: Bearer <access_token>
{
  "title": "Новый проект",
  "description": "Описание проекта",
  "date_proj": "2024-12-31",
  "url": "https://example.com"
}
```

4. Создать событие:
```
POST /api/events/
Authorization: Bearer <access_token>
{
  "title": "Мероприятие",
  "description": "Описание мероприятия",
  "start": "2024-12-01",
  "end": "2024-12-02"
}
```

5. Зарегистрироваться на мероприятие:
```
POST /api/event/register/
Authorization: Bearer <access_token>
{
  "event": 1
}
```

---

## Замечания
- Для доступа к защищённым маршрутам необходимо передавать токен в заголовке:
  - `Authorization: Bearer <токен>`
- Для регистрации и добавления навыков требуется авторизация.
- Создание мероприятий доступно только представителям компаний (`Corporation`).
- При регистрации на мероприятие пользователь не может зарегистрироваться несколько раз на одно и то же событие.

---

Конец документации.